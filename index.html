<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Profesional mloop - Car Price Predictor</title>
    <style>
      body { font-family: Arial, sans-serif; background:#f7f9fc; }
      .card { max-width:720px; margin:48px auto; padding:24px; background:#fff; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.06);} 
      label{display:block;margin-bottom:8px}
      textarea{width:100%;height:160px;padding:8px;margin-top:4px}
      button{padding:10px 14px;margin-top:12px}
      .result{margin-top:12px;padding:10px;background:#eef}
      pre.example{background:#fafafa;padding:8px;border-radius:4px;font-size:13px}
    </style>
  </head>
  <body>
    <div class="card">
      <h2>Profesional mloop - Car Price Predictor</h2>
      <p>Enter the values used during training. Fill the fields below and click <em>Predict</em>.</p>
      <form id="frm">
        <label>Selling Type
          <select name="Selling_type">
            <option value="New">New</option>
            <option value="Used">Used</option>
          </select>
        </label>
        <label>Fuel Type
          <select name="Fuel_Type">
            <option value="Petrol">Petrol</option>
            <option value="Diesel">Diesel</option>
            <option value="CNG">CNG</option>
            <option value="Other">Other</option>
          </select>
        </label>
        <label>Present Price
          <input name="Present_Price" type="number" step="0.01" value="5.0">
        </label>
        <label>Car Age (years)
          <input name="Car_Age" type="number" step="1" value="3">
        </label>
        <label>Driven Kms
          <input name="Driven_kms" type="number" step="1" value="35000">
        </label>
        <label>Owner (number)
          <input name="Owner" type="number" step="1" value="0">
        </label>
        <label>Brand
          <input name="Brand" type="text" value="Toyota">
        </label>
        <label>Transmission
          <select name="Transmission">
            <option value="Manual">Manual</option>
            <option value="Automatic">Automatic</option>
          </select>
        </label>
        <button type="submit">Predict</button>
      </form>
      <div id="result" class="result"></div>
    </div>
    <script>
      const f=document.getElementById('frm');
      const res=document.getElementById('result');
      f.addEventListener('submit', async e=>{
        e.preventDefault();
        res.textContent='Predicting...';
        const form=new FormData(f); const payload={};
        for(const [k,v] of form.entries()){ 
          // try to cast numeric fields
          if(['Present_Price','Car_Age','Driven_kms','Owner'].includes(k)){
            payload[k] = v === '' ? null : Number(v);
          } else {
            payload[k] = v;
          }
        }
        try{
          const r=await fetch('/predict',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});
          const j=await r.json();
          if(r.ok) res.innerHTML='<strong>Prediction:</strong> '+j.prediction;
          else res.textContent='Error: '+(j.error||JSON.stringify(j));
        }catch(err){ res.textContent='Request failed: '+err }
      })
    </script>
  </body>
</html>
